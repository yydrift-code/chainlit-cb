# Caddyfile for testing DNS records and routing
# This configuration serves HTML stub pages for both domains

realtime-demo.renovavision.tech {
	# Serve the HTML stub page for testing
	root * /var/www/html
	file_server
	
	# Serve the specific HTML file
	@html {
		path *
		file
	}
	respond @html /realtime-demo.html
	
	# Logging configuration
	log {
		output file /var/log/caddy/realtime-demo.log
		format json
		level INFO
	}
	
	# Security headers
	header {
		# Security headers
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		X-XSS-Protection "1; mode=block"
		Referrer-Policy strict-origin-when-cross-origin
		
		# Remove server information
		-Server
		Server "RenovaVision"
	}
}

voice-test.renovavision.tech {
	# Serve the HTML stub page for testing
	root * /var/www/html
	file_server
	
	# Serve the specific HTML file
	@html {
		path *
		file
	}
	respond @html /voice-test.html
	
	# Logging configuration
	log {
		output file /var/log/caddy/voice-test.log
		format json
		level INFO
	}
	
	# Security headers
	header {
		# Security headers
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		X-XSS-Protection "1; mode=block"
		Referrer-Policy strict-origin-when-cross-origin
		
		# Remove server information
		-Server
		Server "RenovaVision"
	}
}

# Optional: Redirect www subdomains to main domains
www.realtime-demo.renovavision.tech {
	redir https://realtime-demo.renovavision.tech{uri} permanent
}

www.voice-test.renovavision.tech {
	redir https://voice-test.renovavision.tech{uri} permanent
}
